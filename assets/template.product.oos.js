!function(e){function t(t){for(var n,o,c=t[0],u=t[1],s=t[2],d=0,p=[];d<c.length;d++)o=c[d],i[o]&&p.push(i[o][0]),i[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);for(l&&l(t);p.length;)p.shift()();return a.push.apply(a,s||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,c=1;c<r.length;c++){var u=r[c];0!==i[u]&&(n=!1)}n&&(a.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},i={12:0},a=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var c=window.shopifySlateJsonp=window.shopifySlateJsonp||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var l=u;a.push([540,0,1]),r()}({184:function(e,t,r){"use strict";var n=u(r(57)),i=u(r(58)),a=u(r(34)),o=r(7),c=u(r(185));function u(e){return e&&e.__esModule?e:{default:e}}(0,o.register)("product-ingredients-nutrition",{onLoad:function(){var e=this;return(0,i.default)(n.default.mark(function t(){var r;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.container.querySelector("[data-product-details-json]")){t.next=3;break}return t.abrupt("return");case 3:if(e.info=JSON.parse(r.innerHTML),!e.info.wordpress_product_id){t.next=10;break}return t.next=7,e.getWordPressProductInformation.call(e);case 7:e.apiResponse=t.sent,e.addProductInformation.call(e),e.addNutritionFacts.call(e);case 10:case"end":return t.stop()}},t,e)}))()},getWordPressProductInformation:function(){return fetch("https://www.katefarms.com/wp-json/wp/v2/products-api/"+this.info.wordpress_product_id).then(function(e){return e.json()})},createInformationRow:function(e,t){var r=document.createElement("div");return r.className="product-information-row pb-2",r.innerHTML='<h4 class="mb-0">'+e+"</h4>"+t,r},addProductInformation:function(){var e=this,t=this.container.querySelector("[data-product-details-content]"),r={ingredients:"Ingredients",age_indication:"Age Indication",dri_guidelines:"DRI Guidelines",instructions:"Instructions",storage:"Storage",certifications:"Certifications",insurance_code:"Insurance Code"};if(this.apiResponse.meta){var n=this.apiResponse.meta;Object.keys(r).forEach(function(i){n&&i in n&&n[i].content.trim().length>0&&t.appendChild(e.createInformationRow(r[i],n[i].content))}),n&&"insurance_code"in n&&n.insurance_code.content.trim().length>0&&document.querySelectorAll("[data-product-insurance-code]").forEach(function(e){e.innerHTML=n.insurance_code.content,e.innerHTML='<span class="font-medium">Insurance Code: </span> '+e.innerText})}},addNutritionFacts:function(){var e=this,t=this.container.querySelector("[data-product-details-nutrifacts]");new a.default({render:function(t){return t(c.default,{props:{footnote:e.apiResponse.meta.ingredients.fine_print,columns:[{field:"nutrient",label:"Composition",tdClass:"text-sm px-4 py-2 leading-tight",thClass:"text-left text-xl font-bold px-4 py-3",html:!0},{field:"unit",label:"",tdClass:"text-sm text-right px-4 py-2 leading-tight"},{field:"amount",label:"Amount",tdClass:"text-sm text-right px-4 py-2 leading-tight",thClass:"text-right text-xl font-bold px-4 py-3"}],rows:e.apiResponse.meta.formula_calculator.table.filter(function(e){return!e.exclude_from_ni})}})}}).$mount(t)}})},185:function(e,t,r){"use strict";r.r(t);var n=r(49),i=r(30);for(var a in i)"default"!==a&&function(e){r.d(t,e,function(){return i[e]})}(a);r(186);var o=r(0),c=Object(o.a)(i.default,n.a,n.b,!1,null,null,null);t.default=c.exports},186:function(e,t,r){"use strict";var n=r(32);r.n(n).a},30:function(e,t,r){"use strict";r.r(t);var n=r(31),i=r.n(n);for(var a in n)"default"!==a&&function(e){r.d(t,e,function(){return n[e]})}(a);t.default=i.a},31:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{footnote:{type:String},columns:{type:Array},rows:{type:Array}}}},32:function(e,t,r){},49:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"w-full"},[r("div",{staticClass:"w-full border-t border-b sm:max-w-md sm:border lg:max-w-none border-gray-150 bg-indigo-white"},[e._m(0),e._v(" "),r("table",{staticClass:"vgt-table"},[e._m(1),e._v(" "),r("tbody",e._l(e.rows,function(t,n){return r("tr",{key:n},[r("td",{staticClass:"text-primary-blue text-sm text-left px-4 py-2 leading-tight",domProps:{innerHTML:e._s(t.nutrient)}}),e._v(" "),r("td",{staticClass:"text-primary-blue text-sm text-right p-2 leading-tight",domProps:{innerHTML:e._s(t.unit)}}),e._v(" "),r("td",{staticClass:"text-primary-blue text-sm text-right pl-2 pr-4 py-2 leading-tight",domProps:{innerHTML:e._s(t.amount)}})])}),0)])]),e._v(" "),e.footnote?r("div",{staticClass:"nutrition-facts-footnote mt-4 text-xs text-navy-500",domProps:{innerHTML:e._s(e.footnote)}}):e._e()])},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"product-table"},[t("div",{staticClass:"product-table__header border-b border-gray-150 px-4 pt-6 pb-3"},[t("h3",{staticClass:"leading-none font-bold m-0 text-2xl"},[this._v("Nutrition")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",{staticClass:"text-left text-xl font-bold px-4 py-3",attrs:{colspan:"2"}},[this._v("\n            Composition\n          ")]),this._v(" "),t("th",{staticClass:"text-right text-xl font-bold px-4 py-3"},[this._v("Amount")])])])}];r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i})},540:function(e,t,r){"use strict";var n=r(7);r(66),r(184),(0,n.load)("*")},6:function(e,t){e.exports=window.jQuery},66:function(e,t,r){"use strict";var n=m(r(57)),i=m(r(58)),a=m(r(6)),o=m(r(55)),c=r(187),u=r(11),s=r(7),l=r(70),d=r(179),p=m(d),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(180));function m(e){return e&&e.__esModule?e:{default:e}}var h=(0,a.default)(window),y="hide",v="bar-in",b={submitButton:"[data-submit-button]",submitButtonText:"[data-submit-button-text]",comparePrice:"[data-compare-price]",compareDisplay:"#compareAt",comparePriceText:"[data-compare-text]",priceWrapper:"[data-price-wrapper]",imageWrapper:"[data-product-image-wrapper]",visibleImageWrapper:"[data-product-image-wrapper]:not(.hide)",imageWrapperById:function(e){return b.imageWrapper+"[data-image-id='"+e+"']"},productForm:"[data-product-form]",productPrice:"[data-product-price]",productUnitPrice:"[data-product-unit-price]",thumbnail:"[data-product-single-thumbnail]",thumbnailById:function(e){return"[data-thumbnail-id='"+e+"']"},thumbnailActive:"[data-product-single-thumbnail][aria-current]",quantity:"#Quantity",priceInformation:"[data-pricing-information]",gallery:".product-gallery",buyNowCta:"[data-bar-buy-now]",prices:{normal:"#rc_price_onetime",autodeliver:"#rc_price_autodeliver"},shippingModalTrigger:"[data-shipping-modal-trigger]",shippingModalClose:"[data-shipping-modal-close]",shippingModalContent:"[data-shipping-modal-content]"};(0,s.register)("product",{onLoad:function(){var e=this;return(0,i.default)(n.default.mark(function t(){var r,i;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=document.querySelector(b.productForm),e.setupGallery.call(e),r){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.getProductJson(r.dataset.productHandle);case 6:e.product=t.sent,e.productForm=new c.ProductForm(r,e.product,{onOptionChange:e.onFormOptionChange.bind(e)}),e.productForm.element.addEventListener("submit",e.onFormSubmit.bind(e)),e.quantity=e.container.querySelector(b.quantity),e.prices={},e.prices.onetime=e.product.price,e.compareDisplay=e.container.querySelector(b.compareDisplay),e.compareTotal=e.product.compare_at_price,(i=e.container.querySelector(b.prices.autodeliver))&&(e.prices.autodeliver=Number(i.innerText.replace(/\D/g,""))),e.selectedFrequency="onetime",e.onThumbnailClick=e.onThumbnailClick.bind(e),e.onThumbnailKeyup=e.onThumbnailKeyup.bind(e),e.onFrequencyChange=e.onFrequencyChange.bind(e),e.container.addEventListener("click",e.onThumbnailClick),e.container.addEventListener("keyup",e.onThumbnailKeyup),e.container.querySelectorAll("[name=purchase_type]").forEach(function(t){t.addEventListener("change",e.onFrequencyChange.bind(e,t)),t.addEventListener("click",e.onFrequencyChange.bind(e,t))}),e.prices=JSON.parse(e.container.querySelector(b.priceInformation).innerText),e.quantity&&e.quantity.addEventListener("input",e.updateProductPrice.call(e)),e.setupDefaultFrequency.call(e),e.shippingContentInstance=f.create(e.container.querySelector(b.shippingModalContent)),e.container.addEventListener("click",function(t){if(t.target.closest(b.shippingModalTrigger))return t.preventDefault(),void e.shippingContentInstance.show()}),document.addEventListener("click",function(t){if(t.target.closest(b.shippingModalClose))return t.preventDefault(),void e.shippingContentInstance.close()}),e.container.addEventListener("click",function(t){t.target.closest(b.buyNowCta)&&(t.preventDefault(),window.outerWidth<350?(0,a.default)("body,html").animate({scrollTop:e.container.offsetTop+350}):window.outerWidth<375?(0,a.default)("body,html").animate({scrollTop:e.container.offsetTop+375}):window.outerWidth<768?(0,a.default)("body,html").animate({scrollTop:e.container.offsetTop+400}):(0,a.default)("body,html").animate({scrollTop:e.container.offsetTop-40}))}),h.on("scroll",(0,o.default)(e.handleScroll.bind(e),50)),window.PubSub.subscribe("cart:quantity:update",function(){e.updateProductPrice.call(e)});case 32:case"end":return t.stop()}},t,e)}))()},updateProductPrice:function(){var e=this.quantity.value,t=this.prices[this.selectedFrequency];if(this.container.querySelector(b.productPrice).innerText=(0,u.formatMoney)(e*Number(t)),this.compareTotal){var r=this.compareTotal;this.container.querySelector(b.compareDisplay).innerText=(0,u.formatMoney)(e*Number(r))}},onFrequencyChange:function(e){this.selectedFrequency=e.value;var t=this.quantity.value;this.container.querySelector(b.productPrice).innerText=(0,u.formatMoney)(t*this.prices[this.selectedFrequency]),this.container.querySelector(b.productUnitPrice).innerText=(0,u.formatMoney)(this.prices[this.selectedFrequency]/12)},formatFrequencyText:function(e){var t=e.replace(/\D/g,"");return t+(Number(t)>1?" Weeks":" Week")},setupGallery:function(){new p.default(b.gallery,{type:"carousel",gap:0}).mount({Controls:d.Controls,Swipe:d.Swipe})},setupDefaultFrequency:function(){var e=this,t=setInterval(function(){window.ReCharge&&(clearInterval(t),e.setupRcOptions.call(e),e.frequencyUpdates.call(e))})},frequencyUpdates:function(){var e=this,t=this.container.querySelector(".rc_select__frequency"),r=this.container.querySelector("[data-product-frequency]"),n=this.container.querySelector("[data-product-frequency-wrapper]");t.addEventListener("change",function(){var n=t.querySelector('[value="'+t.value+'"]');r.innerText=e.formatFrequencyText(n.innerText).replace("(Default)","").toLowerCase()});var i=t.querySelector('[value="'+t.value+'"]');r.innerText=this.formatFrequencyText(i.innerText).replace("(Default)","").toLowerCase(),(0,a.default)("input[name=purchase_type]").on("change",function(){var e="autodeliver"==(0,a.default)("input[name=purchase_type]:checked").val();n.style.display=e?"inline-block":"none"}),n.style.display="autodeliver"==(0,a.default)("input[name=purchase_type]:checked").val()?"block":"none"},setupRcOptions:function(){var e=this,t=Array.prototype.slice.call(this.container.querySelectorAll(".rc_select__frequency option")),r=t.map(function(t){return e.formatFrequencyText(t.innerText)}).indexOf("4 Weeks");r>-1&&(t[r].innerText="4 Weeks (Default)",t[r].selected=!0)},handleScroll:function(){h.scrollTop()>=this.container.offsetTop+this.container.offsetHeight?this.container.classList.add(v):this.container.classList.remove(v)},onUnload:function(){this.productForm.destroy(),this.removeEventListener("click",this.onThumbnailClick),this.removeEventListener("keyup",this.onThumbnailKeyup)},getProductJson:function(e){return fetch("/products/"+e+".js").then(function(e){return e.json()})},onFormOptionChange:function(e){var t=e.dataset.variant;this.renderImages(t),this.renderPrice(t),this.renderComparePrice(t),this.renderSubmitButton(t),this.updateBrowserHistory(t)},onThumbnailClick:function(e){var t=e.target.closest(b.thumbnail);t&&(e.preventDefault(),this.renderFeaturedImage(t.dataset.thumbnailId),this.renderActiveThumbnail(t.dataset.thumbnailId))},onThumbnailKeyup:function(e){if(13===e.keyCode&&e.target.closest(b.thumbnail)){var t=this.container.querySelector(b.visibleImageWrapper);(0,l.forceFocus)(t)}},renderSubmitButton:function(e){var t=this.container.querySelector(b.submitButton),r=this.container.querySelector(b.submitButtonText);e?e.available?(t.disabled=!1,r.innerText=theme.strings.addToCart):(t.disabled=!0,r.innerText=theme.strings.soldOut):(t.disabled=!0,r.innerText=theme.strings.unavailable)},renderImages:function(e){e&&null!==e.featured_image&&(this.renderFeaturedImage(e.featured_image.id),this.renderActiveThumbnail(e.featured_image.id))},renderPrice:function(e){var t=this.container.querySelector(b.productPrice);this.container.querySelector(b.priceWrapper).classList.toggle(y,!e),e&&(t.innerText=(0,u.formatMoney)(e.price,theme.moneyFormat))},renderComparePrice:function(e){if(e){var t=this.container.querySelector(b.comparePrice),r=this.container.querySelector(b.comparePriceText);t&&r&&(e.compare_at_price>e.price?(t.innerText=(0,u.formatMoney)(e.compare_at_price,theme.moneyFormat),r.classList.remove(y),t.classList.remove(y)):(t.innerText="",r.classList.add(y),t.classList.add(y)))}},renderActiveThumbnail:function(e){var t=this.container.querySelector(b.thumbnailById(e)),r=this.container.querySelector(b.thumbnailActive);t!==r&&(r.removeAttribute("aria-current"),t.setAttribute("aria-current",!0))},renderFeaturedImage:function(e){var t=this.container.querySelector(b.visibleImageWrapper),r=this.container.querySelector(b.imageWrapperById(e));t.classList.add(y),r.classList.remove(y)},updateBrowserHistory:function(e){var t=this.productForm.element.dataset.enableHistoryState;if(e&&"true"===t){var r=(0,c.getUrlWithVariant)(window.location.href,e.id);window.history.replaceState({path:r},"",r)}},onFormSubmit:function(e){e.preventDefault();var t=this.container.querySelector(b.submitButton);t.disabled=!0;var r={};setTimeout(function(){(0,a.default)(b.productForm).serializeArray().forEach(function(e,t){r[e.name]=e.value});var e={};e.quantity=Number(r.quantity),e.id=Number(r.id),r.purchase_type&&"autodeliver"==r.purchase_type&&(e.properties={shipping_interval_frequency:r["properties[shipping_interval_frequency]"],shipping_interval_unit_type:r["properties[shipping_interval_unit_type]"]}),window.PubSub.publish("product:form:submit",{data:e}),t.disabled=!1},50)}})}});

